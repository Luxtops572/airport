{% extends 'aplicacion/base.html' %}

{% block title %}Vender Boleto{% endblock %}

{% block content %}
<div class="container">
    <h2 class="text-center">Venta de Boleto</h2>

    <p><strong>Vuelo:</strong> {{ vuelo.id }} - {{ vuelo.ciudad_destino }}</p>
    <p><strong>Fecha de salida:</strong> {{ vuelo.fecha_salida }}</p>

    {% if error %}
        <div class="alert alert-danger">{{ error }}</div>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}

        <h5>Asientos disponibles:</h5>
        <ul>
            {% for clase, rango in vuelo.obtener_rangos_asientos.items %}
                <li><strong>{{ clase }}</strong>: 
                    {% for asiento in rango %}
                        {% if asiento not in asientos_ocupados %}
                            {{ asiento }}
                        {% endif %}
                    {% endfor %}
                </li>
            {% endfor %}
        </ul>

        <button type="submit" class="btn btn-primary">Confirmar Venta</button>
    </form>

    <a href="{% url 'vista_moderador' %}" class="btn btn-secondary mt-3">Volver</a>
</div>
{% endblock %}
